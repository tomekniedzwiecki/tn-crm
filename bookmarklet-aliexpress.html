<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AliExpress Bookmarklet â€” TN CRM</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { background: #000; color: #fff; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; min-height: 100vh; display: flex; align-items: center; justify-content: center; }
        .container { max-width: 560px; width: 100%; padding: 40px 24px; }
        h1 { font-size: 24px; font-weight: 600; margin-bottom: 8px; }
        .subtitle { color: #888; font-size: 14px; margin-bottom: 32px; line-height: 1.5; }
        .bookmarklet-link {
            display: inline-flex; align-items: center; gap: 8px;
            background: #111; border: 1px solid #333; border-radius: 10px;
            padding: 14px 24px; color: #fff; text-decoration: none;
            font-size: 14px; font-weight: 500; cursor: grab;
            transition: border-color 0.15s, background 0.15s;
        }
        .bookmarklet-link:hover { border-color: #555; background: #1a1a1a; }
        .bookmarklet-link:active { cursor: grabbing; }
        .icon { font-size: 18px; }
        .steps { margin-top: 40px; }
        .steps h2 { font-size: 14px; color: #888; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 16px; }
        .step { display: flex; gap: 12px; margin-bottom: 16px; }
        .step-num { width: 24px; height: 24px; border-radius: 50%; background: #111; border: 1px solid #333; display: flex; align-items: center; justify-content: center; font-size: 12px; color: #888; flex-shrink: 0; margin-top: 1px; }
        .step-text { color: #ccc; font-size: 14px; line-height: 1.5; }
        .step-text code { background: #111; border: 1px solid #222; padding: 2px 6px; border-radius: 4px; font-size: 13px; color: #10b981; }
    </style>
</head>
<body>
    <div class="container">
        <h1>AliExpress â†’ TN CRM</h1>
        <p class="subtitle">PrzeciÄ…gnij poniÅ¼szy przycisk na pasek zakÅ‚adek. Kliknij go na stronie produktu AliExpress, aby skopiowaÄ‡ dane produktu do schowka.</p>

        <a class="bookmarklet-link" href="javascript:void(function(){try{var rp=window.runParams&&window.runParams.data;if(!rp){var ss=document.querySelectorAll('script');for(var j=0;j<ss.length;j++){var tx=ss[j].textContent;if(tx.indexOf('runParams')>-1){var mm=tx.match(/data:\s*(\{[\s\S]*?\})\s*\}/);if(mm){try{rp=JSON.parse(mm[1]);}catch(e){}if(rp)break;}}}}var images=[];if(rp&&rp.imageModule&&rp.imageModule.imagePathList){images=rp.imageModule.imagePathList.map(function(u){return(u.startsWith('//')?'https:'+u:u).split('?')[0];});}if(!images.length){var ss2=document.querySelectorAll('script');for(var k=0;k<ss2.length;k++){var t2=ss2[k].textContent;var m2=t2.match(/imagePathList\s*:\s*(\[[\s\S]*?\])/);if(m2){try{var arr=JSON.parse(m2[1]);if(arr.length){images=arr.map(function(u){return typeof u==='string'?(u.startsWith('//')?'https:'+u:u).split('?')[0]:'';}).filter(Boolean);break;}}catch(e){}}}}if(!images.length){var allImgs=document.querySelectorAll('img[src*=alicdn]');var seen={};allImgs.forEach(function(el){var s=(el.src||'').split('?')[0];if(s&&!seen[s]&&s.indexOf('_50x50')===-1&&s.indexOf('icon')===-1&&el.naturalWidth>100){seen[s]=1;images.push(s);}});}var n='';if(rp&&rp.titleModule){n=rp.titleModule.subject||rp.titleModule.title||'';}if(!n){var te=document.querySelector('h1[data-pl]')||document.querySelector('h1');if(te)n=te.textContent.trim();}if(!n)n=document.title.replace(/\s*[-|].*$/,'').trim();var p='';if(rp&&rp.priceModule){var pm=rp.priceModule;var pv=pm.formatedActivityPrice||pm.formatedPrice||pm.minActivityPrice||pm.minPrice||'';p=pv.toString().replace(/[^0-9.,]/g,'');}if(!p){var pe=document.querySelector('[class*=Price] span')||document.querySelector('.uniform-banner-box-price');if(pe)p=pe.textContent.replace(/[^0-9.,]/g,'');}var origP='';if(rp&&rp.priceModule){var opm=rp.priceModule;var opv=opm.formatedPrice||opm.maxPrice||'';origP=opv.toString().replace(/[^0-9.,]/g,'');if(origP===p)origP='';}var cur='';if(rp&&rp.priceModule&&rp.priceModule.currencyCode){cur=rp.priceModule.currencyCode;}var rt=null;if(rp&&rp.feedbackModule){var fm=rp.feedbackModule;rt=parseFloat(fm.averageStar||fm.evarageStar||fm.averageStarRage||'');if(isNaN(rt))rt=null;}if(rt===null){var re=document.querySelector('[class*=rating] [class*=text]')||document.querySelector('[class*=middle--rating]');if(re){var rv=parseFloat(re.textContent);if(!isNaN(rv))rt=rv;}}var rc=null;if(rp&&rp.feedbackModule){var rcv=rp.feedbackModule.totalValidNum||rp.feedbackModule.totalValidcount||0;rc=parseInt(rcv);if(isNaN(rc))rc=null;}if(rc===null){var rce=document.querySelector('[class*=review] [class*=count]')||document.querySelector('[class*=rating--count]');if(rce){var rci=parseInt(rce.textContent.replace(/[^0-9]/g,''));if(!isNaN(rci))rc=rci;}}var os=null;if(rp&&rp.tradeModule&&rp.tradeModule.tradeCount){var tc=rp.tradeModule.tradeCount;os=parseInt(tc.toString().replace(/[^0-9]/g,''));if(isNaN(os))os=null;}if(os===null){var ose=document.querySelector('[class*=trade] [class*=count]')||document.querySelector('[class*=sold]');if(ose){var osv=parseInt(ose.textContent.replace(/[^0-9]/g,''));if(!isNaN(osv))os=osv;}}var sn='';if(rp&&rp.storeModule){sn=rp.storeModule.storeName||rp.storeModule.storeTitle||'';}if(!sn){var sne=document.querySelector('[class*=store-name] a')||document.querySelector('[class*=StoreName]');if(sne)sn=sne.textContent.trim();}var d={name:n,images:images,price:p,original_price:origP,currency:cur,source_url:location.href,rating:rt,review_count:rc,orders_sold:os,store_name:sn};navigator.clipboard.writeText(JSON.stringify(d)).then(function(){var parts=[];parts.push(images.length+' zdjÄ™Ä‡');if(p)parts.push('cena: '+p+(cur?' '+cur:''));if(rt)parts.push('rating: '+rt);if(rc)parts.push(rc+' opinii');if(os)parts.push(os+' zamÃ³wieÅ„');if(sn)parts.push('sklep: '+sn);var b=document.createElement('div');b.style.cssText='position:fixed;top:20px;right:20px;z-index:999999;background:%2310b981;color:%23fff;padding:16px 24px;border-radius:10px;font:13px/1.6 sans-serif;box-shadow:0 4px 20px rgba(0,0,0,.4);max-width:340px';var h=document.createElement('div');h.style.cssText='font-weight:600;margin-bottom:4px';h.textContent='âœ“ Skopiowano do schowka';var dd=document.createElement('div');dd.style.cssText='opacity:.85;font-size:12px';dd.textContent=parts.join(' Â· ');b.appendChild(h);b.appendChild(dd);document.body.appendChild(b);setTimeout(function(){b.remove()},3500)});}catch(e){alert('BÅ‚Ä…d bookmarkletu: '+e.message)}}());">
            <span class="icon">ðŸ“¦</span>
            AliExpress â†’ Schowek
        </a>

        <div class="steps">
            <h2>Jak uÅ¼ywaÄ‡</h2>
            <div class="step">
                <div class="step-num">1</div>
                <div class="step-text">PrzeciÄ…gnij przycisk powyÅ¼ej na <strong>pasek zakÅ‚adek</strong> w przeglÄ…darce</div>
            </div>
            <div class="step">
                <div class="step-num">2</div>
                <div class="step-text">OtwÃ³rz stronÄ™ produktu na <strong>AliExpress</strong></div>
            </div>
            <div class="step">
                <div class="step-num">3</div>
                <div class="step-text">Kliknij bookmarklet â€” dane produktu zostanÄ… <strong>skopiowane do schowka</strong></div>
            </div>
            <div class="step">
                <div class="step-num">4</div>
                <div class="step-text">W panelu workflow kliknij <code>Wklej z AliExpress</code> w formularzu dodawania produktu</div>
            </div>
        </div>
    </div>
</body>
</html>
