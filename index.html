<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TN CRM - Logowanie</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    }
                }
            }
        }
    </script>
    <style>
        body { font-family: 'Inter', sans-serif; }

        .gradient-bg {
            background: radial-gradient(ellipse at top, rgba(124, 58, 237, 0.15) 0%, transparent 50%),
                        radial-gradient(ellipse at bottom right, rgba(236, 72, 153, 0.1) 0%, transparent 50%),
                        #09090b;
        }

        .gradient-border {
            position: relative;
            background: linear-gradient(135deg, #18181b, #1f1f23);
            border-radius: 1rem;
        }
        .gradient-border::before {
            content: '';
            position: absolute;
            inset: 0;
            padding: 1px;
            border-radius: 1rem;
            background: linear-gradient(135deg, rgba(124, 58, 237, 0.5), rgba(236, 72, 153, 0.5), rgba(249, 115, 22, 0.3));
            -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            -webkit-mask-composite: xor;
            mask-composite: exclude;
            pointer-events: none;
        }

        .btn-gradient {
            background: linear-gradient(135deg, #7c3aed, #ec4899, #f97316);
            background-size: 200% 200%;
            animation: gradient-shift 3s ease infinite;
        }
        .btn-gradient:hover {
            transform: translateY(-1px);
            box-shadow: 0 10px 40px -10px rgba(124, 58, 237, 0.5);
        }

        @keyframes gradient-shift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        .input-glow:focus {
            box-shadow: 0 0 0 2px rgba(124, 58, 237, 0.3);
        }

        .logo-gradient {
            background: linear-gradient(135deg, #7c3aed, #ec4899);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .animate-fade-in {
            animation: fade-in 0.5s ease-out;
        }
        @keyframes fade-in {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="gradient-bg min-h-screen flex items-center justify-center p-4">

    <div class="w-full max-w-sm animate-fade-in">
        <!-- Logo / Header -->
        <div class="text-center mb-8">
            <div class="inline-flex items-center justify-center w-16 h-16 rounded-2xl bg-gradient-to-br from-purple-600 via-pink-500 to-orange-400 mb-4">
                <svg class="w-8 h-8 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" />
                </svg>
            </div>
            <h1 class="text-2xl font-bold text-white">TN <span class="logo-gradient">CRM</span></h1>
            <p class="text-zinc-500 text-sm mt-1">Panel zarządzania leadami</p>
        </div>

        <!-- Login Form -->
        <div class="gradient-border p-6">
            <form id="login-form" class="space-y-5">
                <div>
                    <label class="block text-zinc-400 text-sm font-medium mb-2">Email</label>
                    <input
                        type="email"
                        id="email"
                        required
                        class="w-full px-4 py-3 bg-zinc-900/50 border border-zinc-700/50 rounded-xl text-white placeholder-zinc-500 focus:outline-none focus:border-purple-500/50 input-glow transition-all"
                        placeholder="twoj@email.com"
                    >
                </div>
                <div>
                    <label class="block text-zinc-400 text-sm font-medium mb-2">Hasło</label>
                    <input
                        type="password"
                        id="password"
                        required
                        class="w-full px-4 py-3 bg-zinc-900/50 border border-zinc-700/50 rounded-xl text-white placeholder-zinc-500 focus:outline-none focus:border-purple-500/50 input-glow transition-all"
                        placeholder="••••••••"
                    >
                </div>
                <button
                    type="submit"
                    class="w-full py-3.5 btn-gradient text-white font-semibold rounded-xl transition-all duration-300"
                >
                    Zaloguj się
                </button>
            </form>

            <!-- Error message -->
            <div id="error-message" class="hidden mt-4 p-3 bg-red-500/10 border border-red-500/20 rounded-xl text-red-400 text-sm text-center"></div>
        </div>

        <!-- Footer -->
        <p class="text-zinc-600 text-xs text-center mt-6">
            Tomasz Niedźwiecki © 2026
        </p>
    </div>

    <script>
        // Supabase configuration
        const SUPABASE_URL = 'https://yxmavwkwnfuphjqbelws.supabase.co';
        const SUPABASE_ANON_KEY = 'sb_publishable_vT94u2GI4gzYl8gCV5sHbQ_Q94YidaI';
        const supabaseClient = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

        // Check if already logged in
        async function checkAuth() {
            const { data: { session } } = await supabaseClient.auth.getSession();
            if (session) {
                window.location.href = '/dashboard';
            }
        }
        checkAuth();

        // Handle login
        document.getElementById('login-form').addEventListener('submit', async (e) => {
            e.preventDefault();

            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            const errorDiv = document.getElementById('error-message');

            errorDiv.classList.add('hidden');

            const { data, error } = await supabaseClient.auth.signInWithPassword({
                email,
                password
            });

            if (error) {
                errorDiv.textContent = 'Nieprawidłowy email lub hasło';
                errorDiv.classList.remove('hidden');
                return;
            }

            window.location.href = '/dashboard';
        });
    </script>

</body>
</html>
